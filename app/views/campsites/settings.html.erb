<%# app/views/campsites/settings.html.erb %>
<div class="mx-auto max-w-7xl lg:flex lg:gap-x-16 lg:px-8">
  <aside class="flex overflow-x-auto border-b border-gray-900/5 py-8 lg:block lg:w-64 lg:flex-none lg:border-0">
    <nav class="flex-none px-4 sm:px-6 lg:px-0" aria-label="Settings menu">
      <ul role="list" class="flex gap-x-3 gap-y-1 whitespace-nowrap lg:flex-col">
        <li>
          <%= link_to settings_campsite_path(@campsite.slug),
              class: "group flex gap-x-3 rounded-md py-2 pl-2 pr-3 text-sm leading-6 font-semibold #{'bg-gray-50 text-indigo-600' if current_page?(settings_campsite_path(@campsite.slug))} #{'text-gray-700 hover:text-indigo-600 hover:bg-gray-50' unless current_page?(settings_campsite_path(@campsite.slug))}" do %>
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="h-6 w-6 shrink-0 #{'text-indigo-600' if current_page?(settings_campsite_path(@campsite.slug))} #{'text-gray-400 group-hover:text-indigo-600' unless current_page?(settings_campsite_path(@campsite.slug))}">
              <path stroke-linecap="round" stroke-linejoin="round" d="M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"></path>
              <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"></path>
            </svg>
            Campsite
          <% end %>
        </li>
        <li>
          <%= link_to settings_portal_campsite_path(@campsite.slug),
              class: "group flex gap-x-3 rounded-md py-2 pl-2 pr-3 text-sm leading-6 font-semibold #{'bg-gray-50 text-indigo-600' if current_page?(settings_portal_campsite_path(@campsite.slug))} #{'text-gray-700 hover:text-indigo-600 hover:bg-gray-50' unless current_page?(settings_portal_campsite_path(@campsite.slug))}" do %>
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="h-6 w-6 shrink-0 #{'text-indigo-600' if current_page?(settings_portal_campsite_path(@campsite.slug))} #{'text-gray-400 group-hover:text-indigo-600' unless current_page?(settings_portal_campsite_path(@campsite.slug))}">
              <path stroke-linecap="round" stroke-linejoin="round" d="M3 8.25V18a2.25 2.25 0 0 0 2.25 2.25h13.5A2.25 2.25 0 0 0 21 18V8.25m-18 0V6a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 6v2.25m-18 0h18M5.25 6h.008v.008H5.25V6ZM7.5 6h.008v.008H7.5V6Zm2.25 0h.008v.008H9.75V6Z"></path>
            </svg>
            Portal
          <% end %>
        </li>
      </ul>
    </nav>
  </aside>

  <main class="px-4 py-8 sm:px-6 lg:flex-auto lg:px-0">
    <div class="mx-auto max-w-2xl space-y-16 sm:space-y-20 lg:mx-0 lg:max-w-none">
      <div>
        <h2 class="text-base font-semibold leading-7 text-gray-900">Campsite Settings</h2>
        <p class="mt-1 text-sm leading-6 text-gray-500">Update your campsite information and settings.</p>

        <%= form_with model: @campsite, url: campsite_path(@campsite.slug), method: :patch, local: true, class: "md:col-span-2 mt-6" do |form| %>
          <% if @campsite.errors.any? %>
            <div class="rounded-md bg-red-50 p-4 mb-6">
              <div class="flex">
                <div class="flex-shrink-0">
                  <svg class="h-5 w-5 text-red-400" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.28 7.22a.75.75 0 00-1.06 1.06L8.94 10l-1.72 1.72a.75.75 0 101.06 1.06L10 11.06l1.72 1.72a.75.75 0 101.06-1.06L11.06 10l1.72-1.72a.75.75 0 00-1.06-1.06L10 8.94 8.28 7.22z" clip-rule="evenodd"></path>
                  </svg>
                </div>
                <div class="ml-3">
                  <h3 class="text-sm font-medium text-red-800">There were some errors:</h3>
                  <div class="mt-2 text-sm text-red-700">
                    <ul role="list" class="list-disc space-y-1 pl-5">
                      <% @campsite.errors.full_messages.each do |message| %>
                        <li><%= message %></li>
                      <% end %>
                    </ul>
                  </div>
                </div>
              </div>
            </div>
          <% end %>

          <div class="grid grid-cols-1 gap-x-6 gap-y-8 sm:max-w-xl sm:grid-cols-6">
            <div class="sm:col-span-3">
              <%= form.label :name, "Campsite name", class: "block text-sm font-medium leading-6 text-gray-900" %>
              <div class="mt-2">
                <%= form.text_field :name, class: "block w-full rounded-md border-0 px-3 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6" %>
              </div>
            </div>

            <div class="sm:col-span-3">
              <%= form.label :primary_colour, "Primary color", class: "block text-sm font-medium leading-6 text-gray-900" %>
              <div class="mt-2">
                <%= form.color_field :primary_colour, class: "block w-full px-3 h-10 rounded-md border-0 py-1.5 shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6" %>
              </div>
            </div>

            <div class="col-span-full">
              <%= form.label :about, "About", class: "block text-sm font-medium leading-6 text-gray-900" %>
              <div class="mt-2">
                <%= form.text_area :about, rows: 3, class: "block w-full rounded-md border-0 px-3 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6", placeholder: "Tell us about your campsite..." %>
              </div>
              <p class="mt-3 text-sm leading-6 text-gray-600">Write a few sentences about your campsite.</p>
            </div>

            <div class="sm:col-span-3">
              <%= form.label :website, "Website", class: "block text-sm font-medium leading-6 text-gray-900" %>
              <div class="mt-2">
                <%= form.url_field :website, class: "block w-full rounded-md border-0 px-3 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6", placeholder: "https://example.com" %>
              </div>
            </div>

            <div class="sm:col-span-3">
              <%= form.label :contact_email, "Contact email", class: "block text-sm font-medium leading-6 text-gray-900" %>
              <div class="mt-2">
                <%= form.email_field :contact_email, class: "block w-full rounded-md border-0 px-3 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6" %>
              </div>
            </div>

            <div class="sm:col-span-3">
              <%= form.label :contact_number, "Contact number", class: "block text-sm font-medium leading-6 text-gray-900" %>
              <div class="mt-2">
                <%= form.telephone_field :contact_number, class: "block w-full rounded-md border-0 px-3 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6" %>
              </div>
            </div>

            <div class="sm:col-span-3">
              <%= form.label :open_from, "Open from", class: "block text-sm font-medium leading-6 text-gray-900" %>
              <div class="mt-2">
                <%= form.text_field :open_from, class: "block w-full rounded-md border-0 px-3 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6" %>
              </div>
            </div>

            <div class="sm:col-span-3">
              <%= form.label :closed_from, "Closed from", class: "block text-sm font-medium leading-6 text-gray-900" %>
              <div class="mt-2">
                <%= form.text_field :closed_from, class: "block w-full rounded-md border-0 px-3 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6" %>
              </div>
            </div>
          </div>

          <div class="mt-8 flex">
            <%= form.submit "Save", class: "rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600" %>
          </div>
        <% end %>
        <div class="mt-10 pt-10 border-t border-gray-200 max-w-2xl">
            <div class="bg-white p-6 border border-gray-200 rounded-lg">
            <h3 class="text-lg font-medium text-gray-900 mb-2">Delete this campsite</h3>
            <p class="text-sm text-gray-600 mb-4">
                Tread carefully here. You delete your campsite, you lose all your data and we can't retrieve any of it for you. Proceed only if you are sure you want your campsite deleted.
            </p>
            <form action="<%= campsite_path(@campsite.slug) %>" method="post" onsubmit="return confirm('Are you sure you want to delete this campsite? This action cannot be undone and all data will be lost forever.')">
                         <input type="hidden" name="_method" value="delete">
                         <input type="hidden" name="authenticity_token" value="<%= form_authenticity_token %>">
                         <button type="submit" class="inline-flex items-center px-4 py-2 bg-red-600 text-white text-sm font-medium rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2">
                           Delete this campsite
                         </button>
                       </form>
            </div>
        </div>
      </div>
    </div>
  </main>
</div>
